<!DOCTYPE html>
	<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Cube PVP</title>
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<link rel="stylesheet" href="fonts/ubuntu.css">
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<style>
			html, body {
				font-family:Ubuntu;
				margin: 0; 
				height: 100; 
				position:fixed;
				overflow: hidden;
				
				-webkit-user-select: none; /* Safari */
				-ms-user-select: none; /* IE 10 and IE 11 */
				user-select: none; /* Standard syntax */
				
			}
			img {
				image-rendering: pixelated;
			}
			#loadingPage {
				position: absolute;
				width: 100%;
				height: 100%;
				top: 50%;
				left: 50%;
				transform:translate(-50%, -50%);
				background-color: #FFFFFF;
				display: flex;
				justify-content: center;
				align-items: center;
				flex-direction: column;
				z-index: 1000;
				font-size:50px;
        	}	
		</style>
		<script>
			document.onreadystatechange = function () {
				if (document.readyState === 'complete') {
					document.getElementById("loadingPage").style.visibility = 'hidden';
					document.getElementById("loadingPage").style.display = 'none';
				} else {
					document.getElementById("loadingPage").style.visibility = 'visibile';
					document.getElementById("loadingPage").style.display = 'flex';
				}
			}
		</script>
	</head>
	<body>
	<div id="loadingPage">LOADING...</div>
		<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    	<script async src="https://unpkg.com/es-module-shims@1.8.0/dist/es-module-shims.js"></script>
		<script src="https://unpkg.com/@tweenjs/tween.js@^20.0.0/dist/tween.umd.js"></script>
		<script type="importmap">
			{
				"imports": {
					"three": "https://unpkg.com/three@0.156.0/build/three.module.js",
					"three/addons/": "https://unpkg.com/three@0.156.0/examples/jsm/"
				}
			}
		</script>
		<img src="assets/crosshair.png" width="25px" style="image-rendering: pixelated;position:absolute; left:52%; top:31%; transform:translate(-50%, 0%);" id="crosshair">
    	<p style="position:absolute; left:100px; color:white; font-size:15px;" id="bulletPoolCount">BulletPool:</p>

<p style="position:absolute; left:220px; color:white; font-size:25px;" id="highScore">HS:</p>
<p style="position:absolute; left:350px; color:white; font-size:25px;" id="score">SCORE:</p>
		<p style="position:absolute; top:50px; background-color:rgba(255, 255, 255, 0.5); font-family:Ubuntu; width:200px; height:350px; overflow:hidden; display:none;" id="consoleDiv">GAME CONSOLE: <br><input style="width:180px; margin-left:10px;" id="consoleInput" placeholder="Variable Name"><br><span id = "console"></span></p>

		<div style="position:absolute; right:2%; top:2%;">
		
		<p id="switchControls" class="btn btn-info border-dark border-5">CONTROLS</p>
		<p id="switchPerformance" class="btn btn-info border-dark border-5">GRAPHICS - <b><span id="graphicsValue">ULTRA HIGH</span></b></p>
		<br>
		<div id="controlsText" style="color:white; font-family:Ubuntu; display:none; width:300px;" >
			<p><u><b>Controls: (KBM | Controller)</b></u><br><b>Movement</b> - WASD | L Joystick<br><b>Jump</b> - Space | A<br><b>Look</b> - Arrow Keys | R Joystick<br><b>Dash</b> - Up Arrow | LS<br><b>Shoot</b> - Q | RT<br><b>Reload</b> - R | X<br><b>Change Gun</b> - Numbers | LB/RB<br><b>Aim</b> - Shift | LT<br><b>Super</b> - E | Y<br>
			
			 <!-- <br><b>SENSITIVITY</b><br>
			 <input type="range" class="form-range" min="0" max="100" id="customRange">
			 <p id = "saveSettings" class="btn btn-info border-dark border-5">Save</p>
			  -->
			 </p>
			 </div>

	   </div>


	   <div style="position:absolute; right:2%; bottom:2%; color:white; font-size:20px; ">


		<div style="display:flex; position:absolute; right:	0px; bottom:110px;">

		
<div style="width:100px; height:100px; background-color:white; margin-right:10px; color:black;" class="d-flex border border-dark border-5 align-items-center justify-content-center">
			<p id="gunUI" class="text-dark mt-3">Pistol</p>
		</div>
		
		<div style="width:100px; height:100px; background-color:white; margin-right:10px; color:black;" class="d-flex border border-dark border-5 align-items-center justify-content-center">
			<span id="ammoLeft" style="font-size:50px;"></span>
		</div>

		<div style="position:absolute; width:100px;height:100px; background-color:red; left:220px;z-index:1;" class="bg-dark"></div>

		<div style="width:100px; height:100px; background: linear-gradient(to top, green, green); background-size: 1% 1%;margin-right:10px;z-index:2;" id = "shootUI" class="border border-dark border-5 text-center pt-1"><img src="assets/shoot.png" width="80px"></div>
		
		<div style="position:absolute; width:100px;height:100px; left:330px;z-index:3;" class="bg-dark"></div>

		<div style="width:100px; height:100px; background: linear-gradient(to top, green, green); background-size: 1% 1%;margin-right:10px;z-index:4;" id = "dashUI" class="border border-dark border-5 text-center pt-1"><img src="assets/dash.png" width="80px"></div>


		<div style="position:absolute; width:100px;height:100px; left:440px;z-index:5;" class="bg-dark"></div>

		<div style="width:100px; height:100px; background: linear-gradient(to top, green, green); background-size: 1% 1%;margin-right:10px;z-index:6;" id = "superUI" class="border border-dark border-5 text-center pt-1"><img src="assets/super.png" width="80px"></div>

		</div>




		<div style="display:flex;">
<div style="width:100px; height:100px; background: linear-gradient(to top, white, white); background-size: 1% 1%;margin-right:10px;z-index:9;" id = "pistol" class="border border-dark border-5 text-center pt-1"><img src="assets/PlayerHoldingPistol.png" width="80px" style="margin-top:10px;"></div>
			<div style="width:100px; height:100px; background: linear-gradient(to top, white, white); background-size: 1% 1%;margin-right:10px;z-index:9;" id = "smg" class="border border-dark border-5 text-center pt-1"><img src="assets/PlayerHoldingSMG.png" width="80px" style="margin-top:10px;"></div>
			<div style="width:100px; height:100px; background: linear-gradient(to top, white, white); background-size: 1% 1%;margin-right:10px;z-index:9;" id = "ar" class="border border-dark border-5 text-center pt-1"><img src="assets/PlayerHoldingAR.png" width="80px" style="margin-top:15px;"></div>
			<div style="width:100px; height:100px; background: linear-gradient(to top, white, white); background-size: 1% 1%;margin-right:10px;z-index:9;" id = "sniper" class="border border-dark border-5 text-center pt-1"><img src="assets/PlayerHoldingSniper.png" width="80px" style="margin-top:20px;"></div>
			<div style="width:100px; height:100px; background: linear-gradient(to top, white, white); background-size: 1% 1%;margin-right:10px;z-index:9;" id = "shotgun" class="border border-dark border-5 text-center pt-1"><img src="assets/PlayerHoldingShotgun.png" width="80px" style="margin-top:20px;"></div>

</div>

</div>

		<div style="position:absolute; bottom:1%; left:1%;">
		
			<div style="display:none;" id="debugTools">
			<p id="switchConsole" class="btn btn-info border-dark border-5">CONSOLE</p>
			<p id="switchAnim" class="btn btn-primary border-dark border-5">Anims ON</p>
		<p id="switchShadow" class="btn btn-primary border-dark border-5">Shadows ON</p>
		<p id="switchGrass" class="btn btn-primary border-dark border-5">GRASS ON</p>
		<br>
				<p id="fireRateUpgrade" class="btn btn-danger border-dark border-5">Upgrade Fire Rate</p>
				
				<p id="bulletSpeedUpgrade" class="btn btn-danger border-dark border-5">Upgrade Bullet Speed</p>

			</div>
			
			
		</div>
		<script type="module" src="index.js?version=0.10.18"></script>
	</body>
</html>


<!-- DEV LOG

0.0.0, release with a ball and the player, 3rd person with Controls, and 1 platform
0.0.1 release with another platform, and better jumping detection
0.0.2 release with buggy dash for debug, and a 3d sprite, and enemy player, changed look controls
0.0.3 release with walls, fixed dash, added control text, and more shadows, and changed shadow render type.
0.1.3 release with higher walls 5->50, added cooldown for dash, added UI, added 4 guns, pistol, smg, ar, sniper, added bullets, added super, made enemies chase you. made 1 of the platforms the spawn platforn, enemies spawn randomly
0.1.4 release with increase in jump height 11->13, added caps lock movement protection, added controls e = super
0.2.4 release with grass, shaders to move grass. changed bullet size to smaller, and added a bullet pooling system to fix lag accumulation, changed ground color to match grass. added fps counter and bullet pool counter
0.2.5 added high score counter
0.3.5 added a platform for people to join, and moved the spawn platform. Made grass shorter, made it interactive. All meshes recieve and cast shadows. Added buttons to remove anims and shadows. Changed player color and made it more metalic. Moved light, Added meshes to all bodies. Made game more efficient. Reduced amount of grass to 80000, it as at 500k+ before. bullets now delete if they are moving slower than .25 units/s.
0.3.6 buffed AR range, added shotgun, removed bug where grass had shadow when pressing on shadows on and off. changed sky color to blue
0.3.7 fixed bug wit jumping midair. set vel of player to 0 when you die to prevent flying into the air.
0.4.7 made it MULTIPLAYER! lots of bug fixes and stuff, added walls using crates (plan to change to wall texture), made a new area for enemies to spawn and players can practice pvp there. changed shotgun shot spread to be the same, changed super speed to 75. made it so players respawn if Y above 15 and Y below 10, and when killed by enemy. Bullets do not hurt people if they are not in the pvp box.
0.5.7 added a crosshair, added controller support, added aiming, shrinked console.
0.5.8 made you slower when aiming
0.6.8 made console smaller. ADDED SHADOWS TO GRASS FINALLY!! added it so other players cause grass to stop moving. You can now change guns with numbers or LB/RB on controller. made it so current gun lights up button.
0.6.9 made console even shorter to fit on smaller computers.
0.7.9 ADDED 3D TEXT! Made players not be able to shoot unless they are in the playing field. remove the anims, and upgrade firerate button (only shown in development) Added a graphics button to switch from low to ultra high graphics. Added a controls button to show controls, and a console button to show console. made camera not clip into walls! crosshair is 0.5 opacity when in wall. Moved the "sun" higher up, to simulate midday. fixed a bug where buttons didnt work. Players now disappear when enterring the practice zone, this makes the practice zone separate for each player.. Added name tags that face the camera!
0.7.10 fixed small bug with name tag
0.7.11 fixed small bug with enemy spawning onthe top of spawn enemies now die when they are not in their box
0.8.11 Added a player model, new model for each weapon, shooting and idle, and for dashing. can no longer shoot while dashing
0.8.12 Hopeful patch to game crashing.
0.8.13 silent patch to fix player mesh not dissapearing when entering practice mode
0.9.13 Third Person Camera!! Added images for gun hotbar instead of words. Removed console from public access. Added aiming TWEENS. Fixed bug when not able to swap between guns when aiming. Crosshair is always in the center now. Player now moves in sync with camera.  
0.10.13 Reloading system, added more icons to UI, added a stone texture, added a grass texture, new building style. fixed large bug when joining, still small joining lag though. fixed a bug where when you resize the window the game doesnt 
0.10.14 removed grass texture to hopefully fix lag.
0.10.15 removed big cobble building, added grass texture back.
0.10.16 removed 2 normal walls, added it so that you nede ot be shooting to reload with 0 ammo
0.10.17 fixed the addition that you nede to be shooting to reload gun. added more stone
0.10.18 added more bullets to shotgun, added trees, made the size of the text fixed in the ammoLeft. removed 2 more walls.
 -->

<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/20.0.0/tween.umd.js"></script>

<div id="box"></div>

<style>
	#box {
		background-color: red;
		width: 100px;
		height: 100px;
	}
</style>

<script>
	const box = document.getElementById('box') // Get the element we want to animate.

	const coords = {x: 0, y: 0} // Start at (0, 0)

	const tween = new TWEEN.Tween(coords, false) // Create a new tween that modifies 'coords'.
		.to({x:100}, 1000); // Move to (300, 200) in 1 second.
		//.easing(TWEEN.Easing.Quadratic.InOut); // Use an easing function to make the animation smooth.
	tween.start() // Start the tween immediately.

	// Setup the animation loop.
	function animate(time) {
		tween.update(time)
		requestAnimationFrame(animate)
		box.style.setProperty('transform', 'translate(' + coords.x + 'px, ' + coords.y + 'px)')
	}
	requestAnimationFrame(animate)
</script> -->